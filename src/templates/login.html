<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - LookOut</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/login.css" />
  </head>
  <body>
    <div class="main-container">
      <div class="desktop">
          <div class="vector"></div>
        <div class="frame" id="header">
        <!-- Logo -->
        <div class="logo">
          <div class="logo-icon"></div>
          <span class="logo-text">LOOKOUT</span>
        </div>

        <!-- Hamburger menu (mobile only) -->
        <div class="hamburger" onclick="toggleMobileMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <!-- Navigation (Desktop) -->
        <nav class="navbar-links desktop-only">
          <a href="/#about" class="nav-link">ABOUT</a>
          <a href="/#why-lookout" class="nav-link">WHY LOOKOUT</a>
          <a href="/#how-it-works" class="nav-link">HOW IT WORKS</a>
          <a href="/#try-it-out" class="nav-link">TRY IT OUT</a>
        </nav>

        <!-- Action Buttons (Desktop) -->
        <a href="/login" class="login-btn desktop-only">LOG IN</a>
        <a href="/signin" class="sign-btn desktop-only">SIGN UP</a>

        <!-- Mobile Dropdown -->
        <div class="mobile-nav" id="mobileNav">
          <div style="display: flex; flex-direction: row; justify-content: space-between; width: 100%">
            <a href="/profile" class="icon-circle" aria-label="Profile">
              <div class="profile-icon-gradient"></div>
            </a>
          <div class="icon logout-icon"></div>
          </div>
          <a href="/#about">ABOUT</a>
          <a href="/#why-lookout">WHY LOOKOUT</a>
          <a href="/#how-it-works">HOW IT WORKS</a>
          <a href="/#try-it-out">TRY IT OUT</a>
        </div>
      </div>
<!--        WRITE YOUR CODE HERE  -->

<div class="flex-row-e">
  <div class="rectangle-3">
    <span class="login">Login</span>
    <span class="welcome-back">Welcome back! Please login to access your account</span>

    <form id="loginForm">
      <div class="flex-row-cbc">
        <div class="rectangle-4">
          <input type="email" class="form-input" id="email" placeholder="Email" required />
        </div>
        <div class="rectangle-4">
          <input type="password" class="form-input" id="password" placeholder="Password" required />
          <div class="icon eye-icon slash" id="togglePassword"></div>
        </div>
      </div>

<!--      <span class="forgot-password">Forgot Password?</span>-->
      <button class="rectangle-6" type="submit">LOGIN</button>
    </form>

    <div class="container">
      <div class="line"></div>
      <div class="text">
        <span class="dont-have-account">Don’t have an account? </span>
        <a href="/signin" class="sign-up-8">SIGN UP</a>
      </div>
      <div class="line"></div>
    </div>
  </div>
  <div class="vector-a"></div>
</div>


         FOOTER CODE START-->
            <footer class="footer">
              <div class="footer-background"></div>

              <div class="footer-content">
                <div class="footer-logo" >
                  <div class="footer-logo-icon"></div>
                  <span class="footer-logo-text">LOOKOUT</span>
                </div>

                <div class="footer-divider"></div>

                <div class="footer-column">
                  <h5><a href="/#about" style="text-decoration: none; color: white">About</a></h5>
                  <h5><a href="/#why-lookout" style="text-decoration: none; color: white">Why Lookout</a></h5>
                  <h5><a href="/#how-it-works" style="text-decoration: none; color: white">How it Works</a></h5>
<!--                  <h5><a href="#why-lookout" style="text-decoration: none; color: white">How To</a></h5>-->
                </div>

                <div class="footer-divider"></div>

                <div class="footer-column">
                  <h5><a href="/#faq" style="text-decoration: none; color: white">F.A.Q</a></h5>
                  <h5><a href="/#header" style="text-decoration: none; color: white">Sitemap</a></h5>
<!--                  <h5>Conditions</h5>-->
<!--                  <h5>Licenses</h5>-->
                </div>

                <div class="footer-divider"></div>

                <div class="footer-column">
                  <h5>Socialize with Lookout</h5>
                  <div class="social-icons">
                    <a href="https://facebook.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-12/c7z2ZSvmCj.png" alt="Facebook" />
                    </a>
                    <a href="https://twitter.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-12/i4Y310fnY6.png" alt="Twitter" />
                    </a>
                    <a href="https://linkedin.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-12/bQOUO7mF4k.png" alt="LinkedIn" />
                    </a>
                    <a href="https://youtube.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-12/DpEvVZuXOE.png" alt="YouTube" />
                    </a>
                    <a href="https://instagram.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-12/M2DwYnSJiQ.png" alt="Instagram" />
                    </a>
                    <a href="https://pinterest.com" target="_blank">
                      <img src="https://codia-f2c.s3.us-west-1.amazonaws.com/image/2025-04-17/ZZaQ5CYZ3H.png" alt="Pinterest" />
                    </a>
                  </div>
                  <div class="footer-button">PROTECT THE TRUTH</div>
                </div>
              </div>

              <hr class="footer-line" />
              <p class="copyright">2025© LOOKOUT - ALL RIGHTS RESERVED</p>
            </footer>
     </div>
    </div>

    <script>
      function toggleMobileMenu() {
        const nav = document.getElementById("mobileNav");
        nav.classList.toggle("show");
      }
    </script>

    <script>
      const toggle = document.getElementById("togglePassword");
      const passwordInput = document.querySelector('input[type="password"]');

      toggle.addEventListener("click", () => {
        const isHidden = passwordInput.type === "password";
        passwordInput.type = isHidden ? "text" : "password";
        toggle.classList.toggle("slash", !isHidden); // Show slash only when password is visible
      });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script>
      document.getElementById("loginForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value;

        const payload = { email, password };

        try {
          const response = await fetch("http://127.0.0.1:8000/api/v1/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            credentials: "include", // send cookie
            body: JSON.stringify(payload),
          });

          if (response.ok) {
            const data = await response.json();  // <-- get the tokens
            localStorage.setItem("access_token", data.access_token); // <-- store it
            alert("Login successful!");
            window.location.href = "/profile";
          } else {
            const data = await response.json();
            alert(data.detail || "Login failed.");
          }
        } catch (error) {
          console.error("Login error:", error);
          alert("Something went wrong.");
        }
      });
</script>




  </body>
</html>
